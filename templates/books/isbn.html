{% extends "base.html" %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/search_results.css' %}">
{% endblock %}

{% block content %}
    <div style="margin: 20px;" class="container-fluid">
        <h2>Search by ISBN</h2>
        <p>Enter the ISBN of the book you're looking for, and we'll see if we can find it.</p>
        <div class="isbn-search search-bar" style="margin-left: 15px;">
            <form id="isbn-search"  method="GET" action="{% url 'books:search_isbn' %}">
                <input type="text" name="isbn" placeholder="Enter ISBN10 here"
                    {% if query %} value="{{query}}" {% endif %} />
            </form>
        </div>

        {% if book %}
            <h3>Result:</h3>
            <div class="isbn-result">
                {% include "books/book_result.html" with book=book %}
            </div>
            <input type="submit" id="isbn-submit"/>
        {% endif %}
    </div>
{% endblock %}

{% block scripts %}
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("isbn-submit").addEventListener("click", function() {
                url = "{% url 'books:create_from_isbn' %}"
                url += "?isbn={{query}}"
                window.location.href = url;
            })        
        });

    </script>
{% endblock %}
