{% extends "base.html" %}

{% block content %}
    <div style="margin: 20px;">
        <h2>Search by ISBN</h2>
        <p>Enter the ISBN of the book you're looking for, and we'll see if we can find it.</p>
        <div class="isbn-search search-bar" style="margin-left: 15px;">
            <form id="isbn-search"  method="GET" action="{% url 'books:search_isbn' %}">
                <input type="text" name="isbn" placeholder="Enter ISBN10 here"
                    {% if query %} value="{{query}}" {% endif %} />
            </form>
        </div>

        {% if title %}
            <h3>Result:</h3>
            {{title}} by {{authors}} ({{pub_year}})
            <img src="https://covers.openlibrary.org/b/isbn/{{query}}-M.jpg" />
            <input type="submit" id="isbn-submit"/>
        {% endif %}
    </div>
{% endblock %}

{% block scripts %}
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("isbn-submit").addEventListener("click", function() {
                url = "{% url 'books:create_from_isbn' %}"
                url += "?isbn={{query}}"
                window.location.href = url;
            })        
        });

    </script>
{% endblock %}
